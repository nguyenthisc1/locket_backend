paths:
  /api/v1/upload/upload:
    post:
      summary: Upload single photo (Flutter app)
      description: |
        Upload a single photo from Flutter app. Supports both file upload and base64 image data.
        
        **Authentication Required:** Include the access token in the Authorization header.
        
        **Supported formats:** JPEG, PNG, GIF, WebP
        **Max file size:** 10MB
      tags: [Photo Upload]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                image:
                  type: string
                  format: binary
                  description: Image file (optional if imageData provided)
                imageData:
                  type: string
                  description: Base64 encoded image data (optional if image file provided)
                caption:
                  type: string
                  maxLength: 500
                  description: Photo caption (optional)
                sharedWith:
                  type: array
                  items:
                    type: string
                  description: Array of user IDs to share with (optional)
                location:
                  type: object
                  properties:
                    lat:
                      type: number
                      minimum: -90
                      maximum: 90
                    lng:
                      type: number
                      minimum: -180
                      maximum: 180
                  description: Location coordinates (optional)
            example:
              caption: "Amazing sunset! ðŸŒ…"
              sharedWith: ["507f1f77bcf86cd799439012"]
              location:
                lat: 40.7128
                lng: -74.0060
      responses:
        '201':
          description: Photo uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Photo uploaded successfully
                  photo:
                    $ref: '#/components/schemas/PhotoResponse'
                  cloudinary:
                    type: object
                    properties:
                      publicId:
                        type: string
                        description: Cloudinary public ID
                      url:
                        type: string
                        description: Cloudinary secure URL
                      width:
                        type: integer
                        description: Image width
                      height:
                        type: integer
                        description: Image height
                      format:
                        type: string
                        description: Image format
                      size:
                        type: integer
                        description: File size in bytes
        '400':
          description: Validation error or file too large
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/upload/upload-multiple:
    post:
      summary: Upload multiple photos (Flutter app)
      description: |
        Upload multiple photos from Flutter app using base64 image data.
        
        **Authentication Required:** Include the access token in the Authorization header.
        
        **Max photos per request:** 10
      tags: [Photo Upload]
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required: ['photos']
              properties:
                photos:
                  type: array
                  items:
                    type: object
                    required: ['imageData']
                    properties:
                      imageData:
                        type: string
                        description: Base64 encoded image data
                      caption:
                        type: string
                        maxLength: 500
                        description: Photo caption (optional)
                      sharedWith:
                        type: array
                        items:
                          type: string
                        description: Array of user IDs to share with (optional)
                      location:
                        type: object
                        properties:
                          lat:
                            type: number
                            minimum: -90
                            maximum: 90
                          lng:
                            type: number
                            minimum: -180
                            maximum: 180
                        description: Location coordinates (optional)
            example:
              photos:
                - imageData: "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQ..."
                  caption: "First photo"
                  sharedWith: ["507f1f77bcf86cd799439012"]
                - imageData: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
                  caption: "Second photo"
      responses:
        '201':
          description: Photos uploaded successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: 2 photos uploaded successfully
                  photos:
                    type: array
                    items:
                      type: object
                      properties:
                        photo:
                          $ref: '#/components/schemas/PhotoResponse'
                        cloudinary:
                          type: object
                          properties:
                            publicId:
                              type: string
                            url:
                              type: string
                            width:
                              type: integer
                            height:
                              type: integer
                            format:
                              type: string
                            size:
                              type: integer
                  total:
                    type: integer
                    description: Number of successfully uploaded photos
        '400':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '401':
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '500':
          description: Internal server error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/upload/{photoId}:
    delete:
      summary: Delete photo with Cloudinary cleanup
      description: |
        Delete a photo and remove it from Cloudinary storage.
        
        **Authentication Required:** Include the access token in the Authorization header.
        
        **Note:** Only the photo owner can delete photos.
      tags: [Photo Upload]
      security:
        - bearerAuth: []
      parameters:
        - name: photoId
          in: path
          description: Photo ID
          required: true
          schema:
            type: string
            example: "507f1f77bcf86cd799439011"
      responses:
        '200':
          description: Photo deleted successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  message:
                    type: string
                    example: Photo deleted successfully
                  deletedPhoto:
                    type: object
                    properties:
                      id:
                        type: string
                        description: Photo ID
                      publicId:
                        type: string
                        description: Cloudinary public ID
                      imageUrl:
                        type: string
                        description: Image URL
        '401':
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Access denied - Not the photo owner
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Photo not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'

  /api/v1/upload/{photoId}/urls:
    get:
      summary: Get optimized image URLs
      description: |
        Get responsive image URLs for different sizes (thumbnail, small, medium, large).
        
        **Authentication Required:** Include the access token in the Authorization header.
        
        **Note:** Only works for Cloudinary images.
      tags: [Photo Upload]
      security:
        - bearerAuth: []
      parameters:
        - name: photoId
          in: path
          description: Photo ID
          required: true
          schema:
            type: string
            example: "507f1f77bcf86cd799439011"
      responses:
        '200':
          description: Image URLs retrieved successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  photo:
                    type: object
                    properties:
                      id:
                        type: string
                      imageUrl:
                        type: string
                      publicId:
                        type: string
                      caption:
                        type: string
                  responsiveUrls:
                    type: object
                    properties:
                      thumbnail:
                        type: string
                        description: 150x150 thumbnail URL
                      small:
                        type: string
                        description: 300x300 URL
                      medium:
                        type: string
                        description: 600x600 URL
                      large:
                        type: string
                        description: 1200x1200 URL
                      original:
                        type: string
                        description: Original image URL
                  isCloudinaryImage:
                    type: boolean
                    description: Whether the image is stored on Cloudinary
        '401':
          description: Unauthorized - Invalid or missing token
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '403':
          description: Access denied - No access to photo
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
        '404':
          description: Photo not found
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse' 